# 反思 - 2026-01-19

## 今日反思要点

### 1. 沟通与问答
- **正面回答问题**: 用户问"怎么计算的"，要给出具体计算过程
- **改动前说明**: 修改原有逻辑前必须说明原因，获得确认后再调整
- **不要盲目修改**: 先 debug 找到真正原因，而非猜测修复

### 2. 技术决策
- **滑点存储**: 存储精确汇率（min_acceptable_rate）而非百分比
- **组件复用**: 相似功能抽取统一组件，通过参数化处理差异
- **资金安全**: 自动化扣款操作必须有严格的安全检查

### 3. Payment Kit 特定
- delegation 金额计算要用滑点下限而非当前汇率
- 切换支付方式时需要检查授权金额阈值
- 汇率精度使用两位即可简化计算

## 标签索引

- `#debugging` - 调试相关
- `#architecture` - 架构设计
- `#payment` - 支付相关
- `#slippage` - 滑点配置
- `#communication` - 沟通问答

## 关联会话

- 会话数量: 45 个
- 总消息数: 6909 条
- 主要项目: payment-kit-master/blocklets/core

---
